services:
  backend:
    image: node:20-alpine
    working_dir: /app
    volumes:
      - ../backend:/app
    command: sh -c "npm install && npm run dev"
    environment:
      - PORT=4000
      - RPC_URL=http://anvil:8545
    ports:
      - "4000:4000"
    depends_on:
      - anvil

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  anvil:
    image: ghcr.io/foundry-rs/foundry:latest
    entrypoint: ["anvil", "--host", "0.0.0.0", "--port", "8545"]
    ports:
      - "8545:8545"
